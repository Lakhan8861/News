!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=Object.defineProperty,t=(t,o,n)=>(((t,o,n)=>{o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n})(t,"symbol"!=typeof o?o+"":o,n),n);const o=new class{constructor(){t(this,"_our_document",null),t(this,"_our_node")}set document(e){this._our_document=e}get document(){const{_our_document:e}=this;return e??globalThis.document}set Node(e){this._our_node=e}get Node(){const{_our_node:e}=this;return e??globalThis.Node}useGlobalDocument(){this._our_document=null}useGlobalNode(){this._our_node=null}},n=["circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"],i="http://www.w3.org/2000/svg";let a=!1;const r=function(e,t,...r){const{document:s,Node:l}=o;if("function"==typeof e)return e(t??{},r);if(function(e){return n.includes(e)}(e))return function(e,t,...n){const{document:r,Node:s}=o;a||(a=!0,console.warn("texsaur SVG support is experimental!"));const l=r.createElementNS(i,e);let c;for(c of Object.keys(t)){c=c.toString();const e=t[c];l.setAttribute(c,e)}for(let o of n)Array.isArray(o)?l.append(...o):o instanceof s?l.appendChild(o):l.append(o);return l}(e,t??{},...r);const c=s.createElement(e);let d,p=t??{};for(d of Object.keys(p)){const t=(t,o)=>console.warn(e,`received incorrect value type for property '${d}': expected `,typeof t,"instead of",typeof o);d=d.toString();const o=p[d];switch(d){case"style":if("object"==typeof o)for(const[e,t]of Object.entries(o)){const o=e;"string"==typeof t&&(c.style[o]=t)}else{if("string"==typeof o)break;t("object | string",o)}continue}if(/^on/.test(d))"function"==typeof o?c.addEventListener(d.substring(2),p[d]):t("function",o);else try{const e=c;void 0===e[d]?c.setAttribute(d,o):e[d]=o}catch(u){console.error(`Could not set ${d} on ${c.tagName}`,u),t(typeof c[d],o)}}for(let o of r.flat())o instanceof l?c.appendChild(o):"string"!=typeof o&&(null==o?void 0:o[Symbol.iterator])?c.append(...o):c.append(o);return c};r.Fragment=function(e,t){return t};const s=new class{constructor(e){t(this,"data"),t(this,"observers",[]),this.data=e}dispatch(e){this.data={...this.data,...e},this.observers.forEach((e=>{e(this.data)}))}subscribe(e){this.observers.push(e),e(this.data)}get(e){return"*"===e?this.data:this.data[e]}}({currentPage:"login"}),l=(e,t,o,n)=>{try{var i=L(),a=window.location.href,r=M("_ht_clientid")?M("_ht_clientid"):"",s=!1;M("token")&&M("_ht_clientid")&&(s=!0);var l="";"undefined"!=typeof pageTYPE&&(l=pageTYPE),window.dataLayer.push({event:e,widget_name:t,page_type:l,section:i.article_section,sub_section_name:i.article_subsection,story_title:i.article_title,current_url:a,data_source:"non-amp",logged_in_status:s?"logged_in":"non_logged_in",user_ID:r,cta_text:o,event_label_2:n})}catch(c){console.log(c)}},c="https://accounts.hindustantimes.com",d=/^[6789]\d{9}$/;var p=1036,u="https://sso.hindustantimes.com";let g;const m=()=>{setTimeout((()=>{g=setInterval((()=>{I()}),1e3),e(),document.querySelector("#eng_otp_boxes").addEventListener("paste",(e=>{var t=e.clipboardData.getData("text/plain").substring(0,6);for(let o=0;o<t.length;o++)document.querySelector("#otp"+(o+1)).value=t[o],console.log(t,"pasteData");b(),e.preventDefault()}))}),0);const e=()=>{const e=new AbortController;setTimeout((()=>{signal.abort()}),6e4),async function(){if("OTPCredential"in window){let{code:t,type:o}=await navigator.credentials.get({signal:e.signal,otp:{transport:["sms"]}});for(let e=0;e<t.length;e++)document.querySelector("#otp"+(e+1)).value=t[e];b()}else console.log("OTPCredential failed")}()};return r(ue,{page:"obOtp"})},h=(e,t)=>{if(8==t.keyCode)e.previousSibling.focus();else{let t=e.value;t.length>1&&(e.value=t.substring(0,1)),e.nextSibling.focus()}};let y=!1;const b=()=>{y||(l("onboarding_journey_interaction","Enter Your Mobile Number Card","Otp Entered"),y=!0);let e=document.querySelector("#otp1").value,t=document.querySelector("#otp2").value,o=document.querySelector("#otp3").value,n=document.querySelector("#otp4").value,i=document.querySelector("#otp5").value,a=document.querySelector("#otp6").value;""!=e&&""!=t&&""!=o&&""!=n&&""!=i&&""!=a||_()},_=()=>{document.querySelector(".sso-otp-enter-box-wrap").classList.remove("error"),document.querySelector("#eg-otp-inp-err").innerHTML=""},f=()=>{let e="";for(let t=1;t<7;t++)e+=document.querySelector(`#otp${t}`).value;return e},v=e=>{document.querySelector(".sso-otp-enter-box-wrap").classList.add("error");let t=e||"Sorry, we are not able to verify the OTP";document.querySelector("#eg-otp-inp-err").innerHTML=t};var w=!1;const T=()=>{const e=e=>document.getElementById(e);return r("div",{className:"inpHolder  sso-otp-enter-box-wrap byemail eg_mid_textbox eg_otp error1",id:"otpfield"},r("input",{type:"tel",id:"otp1",oninput:()=>(()=>{const e=document.querySelector("#otp1").value.substring(0,6);for(let t=0;t<e.length;t++)document.querySelector("#otp"+(t+1)).value=e[t];b()})(),onkeyup:t=>[b(),h(e("otp1"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),r("input",{type:"tel",id:"otp2",oninput:()=>_(),onkeyup:t=>[b(),h(e("otp2"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),r("input",{type:"tel",id:"otp3",oninput:()=>_(),onkeyup:t=>[b(),h(e("otp3"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),r("input",{type:"tel",id:"otp4",oninput:()=>_(),onkeyup:t=>[b(),h(e("otp4"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),r("input",{type:"tel",id:"otp5",oninput:()=>_(),onkeyup:t=>[b(),h(e("otp5"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}),r("input",{type:"tel",id:"otp6",oninput:()=>_(),onkeyup:t=>[b(),h(e("otp6"),t)],pattern:"^[0-9]$;",className:"inp otp otp-no eg_text_otp"}))},C=()=>{const e=e=>document.getElementById(e);return r("div",{className:"inpHolder  sso-otp-enter-box-wrap byemail eg_mid_textbox eg_otp error1",id:"otpfield"},r("input",{type:"number",id:"otp1",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp1"),t)],className:"inp otp otp-no"}),r("input",{type:"number",id:"otp2",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp2"),t)],className:"inp otp otp-no"}),r("input",{type:"number",id:"otp3",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp3"),t)],className:"inp otp otp-no"}),r("input",{type:"number",id:"otp4",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp4"),t)],className:"inp otp otp-no"}),r("input",{type:"number",id:"otp5",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp5"),t)],className:"inp otp otp-no"}),r("input",{type:"number",id:"otp6",maxLength:1,oninput:()=>_(),onkeyup:t=>[b(),h(e("otp6"),t)],className:"inp otp otp-no"}))};let k="";const S=async e=>{const t=c+"/mobile/loggedIn/generateOtp",o={cellNumber:"91"+k,otpFor:"AUTHENTICATION",referrer:s.get("client"),newsletterMergeRequest:!0};let n={Authorization:M("token"),"X-Client":p,"Content-Type":"application/json"};try{let l=await fetch(t,{method:"POST",headers:n,body:JSON.stringify(o)}),c=await l.json();if(c.body.success)e||(s.dispatch({currentPage:"obOtp"}),navigator.userAgent.match(/chrome|chromium|CriOS/i)?null==(i=document.getElementById("eng_otp_boxes"))||i.append(r(T,null)):null==(a=document.getElementById("eng_otp_boxes"))||a.append(r(C,null)));else{"PH-001"==c.body.message.code&&D("Another account with this phone number exists.");let e=c&&c.message?c.message.text:" ";console.log(e)}}catch(l){console.log(JSON.stringify(l))}var i,a},x=(e,t,o)=>{var n=new Date;n.setTime(n.getTime()+31536e6);var i=";expires ="+n.toGMTString(),a=";domain =.hindustantimes.com;path=/;Secure=true";document.cookie="token="+e+i+a,document.cookie="_ht_clientid="+t+i+a,document.cookie="name="+o+i+a,document.cookie="ht_token="+e+i+a},N=(e,t,o)=>{try{var n={};n.clientID=M("_ht_clientid")?M("_ht_clientid"):"",n.type="Click",n.step=e,n.action=t,n.name=M("name")?M("name"):"",K||(n.mobile_unverified=!0),n.preferences=o,(k||$)&&K&&(n.mobile=k||$),"undefined"!=typeof dapTracker?dapTracker.track("LoginOnboardingActivity",n,"event"):console.log("dapTracker is not available")}catch(i){console.log(i)}};let O=1,E=0;const I=()=>{let e=document.getElementById("eg-sec");if(e){if(e=e.innerHTML,e){let t=e>10?--e:e>0?"0"+--e:P();document.getElementById("eg-sec").innerHTML=t||"00"}}else clearInterval(g)},P=()=>{document.querySelector(".eg-otp_msg").style.display="none",document.querySelector(".eg_resend_otp").style.display="block",document.getElementById("eg-sec").innerHTML="00",clearInterval(g),clearInterval(V)};let j;const L=()=>{try{if(j)return j;let e=new URL(window.location.href).pathname.split("/"),t=e[e.length-1].split("-"),o=null;t.length>1&&(o=t[t.length-1].match(/\d+/)?t[t.length-1].match(/\d+/)[0]:null),t.pop();let n=t.join(" ");j={article_title:n||null,article_section:e[1]?e[1]:null,article_subsection:4===e.length?e[2]:null,article_id:o||null}}catch(e){return console.log(e),{article_title:null,article_section:null,article_subsection:null,article_id:null}}return j};function M(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){let e=o[n];for(;" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return null}const q=(e,t)=>{s.get("rootElement").innerHTML="",""!=e&&l(e,t),window.open(window.location.href,"_self")},D=e=>{let t=document.getElementById("eg-name-inp-err"),o=e||"";return""===k?o="This is a mandatory field":k.length<10?o="Please enter a valid 10 digit number":d.test(k)||(o="Not a valid phone."),""===o||(t.textContent=o,Q(),!1)},A=e=>{let t=e.split(" ");return t[0]?t[0].charAt(0).toUpperCase()+t[0].slice(1):"Reader"},B=()=>{H();const e=G.shift();e&&""!=e||(X&&K&&W&&ee(!0,!0),oe()),s.dispatch({currentPage:e})},H=()=>{E+=1,O=Math.ceil(100*E/z)};var U="https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png",$="",R="Reader",G=[],Y="",F="",J="";let z,V,X=!1,K=!1,W=!1;const Q=()=>{document.querySelector(".eg_mid_textbox").classList.add("eg_valid"),document.querySelector(".eg_text").classList.add("eg_validation"),document.querySelector("#eg-name-inp-err").style.display="block"},Z=async e=>{let t=u+"/sso/api/v1/user/update",o={"X-Client":p,Authorization:M("token")?M("token"):"","Content-Type":"application/json"};const n={name:e,referrerCode:s.get("client")?s.get("client"):"HT",onboardingViewed:!0};try{let i=await fetch(t,{method:"POST",headers:o,body:JSON.stringify(n)}),a=await i.json();if(1==a.success&&a.data)R=e,ie("name"),(e=>{var t=new Date;t.setTime(t.getTime()+31536e6);var o=";expires ="+t.toGMTString();document.cookie="name="+e+o+";domain =.hindustantimes.com;path=/;Secure=true"})(e),N("Name","Submit"),B();else{let e=a&&a.message&&a.message?a.message:"";console.log("Something went wrong while updating name : "+getStringObject(e))}}catch(i){console.log(JSON.stringify(i))}},ee=async(e,t)=>{let o=u+"/sso/api/v1/user/update",n={"X-Client":p,Authorization:M("token")?M("token"):"","Content-Type":"application/json"};const i={referrerCode:s.get("client")?s.get("client"):"HT",onboardingViewed:e,onboardingCompleted:t};try{let a=await fetch(o,{method:"POST",headers:n,body:JSON.stringify(i)}),r=await a.json();if(1==r.success&&r.data)console.log("onboardingViewed: "+e+", onboardingCompleted: "+t);else{let e=r&&r.message&&r.message?r.message:"";console.log("Something went wrong while updating name : "+getStringObject(e))}}catch(a){console.log(JSON.stringify(a))}},te=e=>{var t=new Date;t.setTime(t.getTime()+18e5);var o=";expires ="+t.toGMTString();document.cookie="unlockContainer="+e+o+";domain =.hindustantimes.com;path=/;Secure=true"},oe=async(e,t)=>{""!=e&&"onboarding_journey_close_clicked"==e&&l(e,t),s.get("campaignId")&&s.get("campaignName")&&s.get("campaignType")||q();try{let{tnc:e,redemptionUrl:t,vendorId:o,vendorLogo:n,voucherCategory:i,description:a,validity:r,couponCode:l,howToAvail:c,color1:d,color2:p,categoryIcon:u,cardTextColor:g}=await ne();window.bottomSlider?window.bottomSlider.render({element:s.get("rootElement"),client:s.get("client"),modeType:"Login Journey",bannerImageURL:n,sdkType:"confettiPopup",isOnboarding:!0,cardColor1:d,cardColor2:p,vendorName:o,voucherCategory:i,categoryIcon:u,description:a,validity:r,couponCode:l,availOfferLink:t,termsAndConditionsUrl:e,howToRedeemUrl:c,cardTextColor:g,sdk_redirect_url:s.get("sdk_redirect_url"),obUserName:R,obUserImg:U}):(console.log("Failed to load bottom slider sdk"),q())}catch(o){console.log("no voucher allocation")}},ne=async()=>{let e=u+"/vms/api/v1/promo/fulfillment";const t={"Content-Type":"application/json","X-Client":p,Authorization:M("token")},o={campaignId:s.get("campaignId"),name:s.get("campaignName"),type:s.get("campaignType")};try{let n=await fetch(e,{method:"POST",headers:t,body:JSON.stringify(o)}),i=await n.json();if(i.success&&i.data){if(te(!0),i.data&&!(i.data.length<1)){return((e,t,o)=>{try{var n={};n.clientID=M("_ht_clientid")?M("_ht_clientid"):"",n.type="Allocation",n.source="Onboarding",n.action=action,n.voucherID=e,n.brand=t,n.category=o,"undefined"!=typeof dapTracker?dapTracker.track("VoucherActivity",n,"event"):console.log("dapTracker is not available")}catch(i){console.log(i)}})(i.data[0].voucherConfigDTO.voucherId,i.data[0].voucherConfigDTO.vendorId,i.data[0].voucherConfigDTO.voucherCategory),{tnc:i.data[0].voucherConfigDTO.tnc,redemptionUrl:i.data[0].voucherConfigDTO.redemptionUrl,vendorId:i.data[0].voucherConfigDTO.vendorId,vendorLogo:i.data[0].voucherConfigDTO.vendorLogo,voucherCategory:i.data[0].voucherConfigDTO.voucherCategory,description:i.data[0].voucherConfigDTO.description,validity:i.data[0].voucherConfigDTO.endDate,couponCode:i.data[0].voucherCode,howToAvail:i.data[0].voucherConfigDTO.howToAvail,color1:i.data[0].voucherConfigDTO.voucherCardConfig.color1,color2:i.data[0].voucherConfigDTO.voucherCardConfig.color2,categoryIcon:i.data[0].voucherConfigDTO.categoryIcon,cardTextColor:i.data[0].voucherConfigDTO.voucherCardConfig.textColor}}s.dispatch({currentPage:"congratulations"})}else console.log("Error allocating the voucher to the user:",i),te(!1),s.dispatch({currentPage:"congratulations"})}catch(n){console.error("Something went wrong:",n),te(!1),s.dispatch({currentPage:"congratulations"})}},ie=e=>{"name"==e?X=!0:"mobile"==e?K=!0:"topic"==e&&(W=!0)},ae=()=>{var e=!1;return r(r.Fragment,null,r("div",{class:"eg_mid_textbox"},r("input",{type:"text",placeholder:"Type your name here",class:"eg_text",id:"eg_name_input",onclick:()=>{var t;t="Name Entered",e||l("onboarding_journey_interaction","Enter Your Name Card",t),e=!0,document.querySelector("#eg-name-inp-err").style.display="none",document.querySelector(".eg_mid_textbox").classList.remove("eg_valid"),document.querySelector(".eg_text").classList.remove("eg_validation")}}),r("span",{class:"eg-validation_msg",id:"eg-name-inp-err",style:{display:"none"}}," This is a mandatory field")),r("button",{class:"eg_proceed",onclick:()=>{!function(){let e=document.getElementById("eg_name_input").value;if(e.length<3)return document.querySelector(".eg_mid_textbox").classList.add("eg_valid"),document.querySelector(".eg_text").classList.add("eg_validation"),void(document.querySelector("#eg-name-inp-err").style.display="block");l("onboarding_journey_interaction","Enter Your Name Card","Proceed Clicked"),Z(e)}()}},"Proceed"),r("button",{class:"eg_skip",onclick:()=>{l("onboarding_journey_interaction","Enter Your Name Card","Skip Clicked"),B()}},"Skip this step"))},re=()=>{var e=!1;const t=t=>{e||l("onboarding_journey_interaction","Enter Your Mobile Number Card",t),e=!0};return r(r.Fragment,null,r("div",{class:"eg_mid_textbox eg_number"},r("span",{class:"eg-number_initial"},"+91"),r("input",{type:"tel",placeholder:"Enter number here",maxlength:"10",autofocus:!0,autoComplete:"off",value:k,id:"eg_mobile_input",class:"eg_text",onclick:()=>{t("Mobile Number Entered"),document.querySelector("#eg-name-inp-err").style.display="none",document.querySelector(".eg_mid_textbox").classList.remove("eg_valid"),document.querySelector(".eg_text").classList.remove("eg_validation")},onchange:e=>(e=>{k=e.target.value})(e)}),r("span",{class:"eg-validation_msg",id:"eg-name-inp-err",style:{display:"none"}}," This is a mandatory field")),r("button",{class:"eg_proceed",onclick:()=>{t("Get Otp Clicked"),l("onboarding_journey_interaction","Enter Your Mobile Number Card","Get Otp Clicked"),N("Mobile number","Send OTP"),D()&&S(!1)}},"Get OTP"),r("button",{class:"eg_skip",onclick:()=>{t("Skip Clicked"),B()}},"Skip this step"))},se=()=>{var e=!1;return r(r.Fragment,null,r("div",{class:"eg_mid_textbox",id:"eng_otp_boxes"}),r("div",{style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-between"}},r("div",{class:"eg-valid_otp",id:"eg-otp-inp-err",style:{display:"block"}}),r("div",{class:"eg_resend_otp",style:{display:"none"},onclick:()=>(()=>{_(),document.querySelector("#eg-sec").innerHTML="30",document.querySelector(".eg-otp_msg").style.display="block",document.querySelector(".eg_resend_otp").style.display="none",V=setInterval((()=>{I()}),1e3),l("onboarding_journey_interaction","Enter Your Mobile Number Card","Resend Otp Clicked"),N("OTP","Resend OTP");for(let e=1;e<7;e++)document.querySelector("#otp"+e).value="";S(!0)})()},r("a",{href:"#"},"Resend OTP"))),r("div",{class:"eg-otp_msg",style:!0},r("span",null,"Didn't recieve OTP? Retry in "),r("span",{class:"eg-timer_otp"},"00:",r("span",{id:"eg-sec"},"30"))),r("button",{class:"eg_proceed",onclick:()=>(async()=>{if(f().length<6)return void v("This is a mandatory field");let e=M("token");const t=M("_ht_fp")?M("_ht_fp"):"";if(1!=w){w=!0;let n=c+"/mobile/loggedIn/verifyOtp",i={cellNumber:"91"+k,otp:f(),otpFor:"AUTHENTICATION",referrer:s.get("client"),newsletterMergeRequest:!0},a={"Content-Type":"application/json","X-Client":p,Authorization:e,_ht_fp:t};try{let t=await fetch(n,{method:"POST",headers:a,body:JSON.stringify(i)}),o=await t.json();if(console.log(o),o.body.success){let t=o.body.data.name,n=o.body.data.clientId;e=o.body.data.authenticationToken||e,ie("mobile"),l("onboarding_journey_interaction","Enter Your Mobile Number Card","Otp Next Clicked"),N("OTP","Verify OTP"),x(e,n,t),P(g),B()}else{let e=o&&o.body.message?o.body.message.text:"Please enter valid OTP";v(e),P(g)}w=!1}catch(o){P(),v(),w=!1}}})()},"Next"),r("button",{class:"eg_skip",onclick:()=>{var t;t="Skip Clicked",e||l("onboarding_journey_interaction","Enter Your Mobile Number Card",t),e=!0,B()}},"Skip this step"))},le=(e,t)=>{let o=[];for(let n=0;n<e.length;n+=t)o.push(e.slice(n,n+t));return o},ce=e=>e.charAt(0).toUpperCase()+e.slice(1);let de=[];const pe=()=>{const e=le(be,3);let t=new Set,o=new Set;var n=!1;const i=async e=>{if(de.includes(e)?de=de.filter((t=>t!==e)):de.push(e),!be.includes(e)||o.has(e))return;var a;a="Topics selected",n||l("onboarding_journey_interaction","Select Topics Card",a),n=!0;if(document.getElementById(`eg-${e}-topic`).checked){let n=await(async e=>{let t="https://personalize.hindustantimes.com/popular-topics-ht?htfpId="+(M("_ht_fp")?M("_ht_fp"):"1709288555155")+"&propertyId="+(s.get("client").toLowerCase()||"ht")+"&platformId=web&section="+e+"&days=1";const o={"Content-Type":"application/json"};try{let e=await fetch(t,{method:"GET",headers:o}),n=await e.json();return n[0].items?n[0].items:(console.log("Request was not successful:",n),[])}catch(n){return console.error("Error fetching subtopics:",n),[]}})(e);if(o.add(e),!n)return;if(n=n.filter((e=>!be.includes(e)&&!t.has(e)&&(t.add(e),!0))),n.length>1){((e,t,o,n)=>{let i=t;e.forEach(((e,t)=>{let a=document.createElement("ul");a.className="eg-childTopics",requestAnimationFrame((()=>{a.classList.add("eg-topicAnimation")})),a.id=`eg-${o}-subtopics`,e.forEach((e=>{let t=document.createElement("li");t.id=`eg-${e}-item`;let o=document.createElement("input");o.type="checkbox",o.id=`eg-${e}-subtopic`,o.onclick=()=>n(e);let i=document.createElement("label");i.className="eg-topics-label",i.htmlFor=`eg-${e}-subtopic`;let r=document.createElement("img");r.src="https://www.hindustantimes.com/static-content/1y/ht/personalisation/tick_icon.png",i.appendChild(r),i.appendChild(document.createTextNode(ce(e))),t.appendChild(o),t.appendChild(i),a.appendChild(t)})),i.insertAdjacentElement("afterend",a),i=a}))})(le(n,3),document.getElementById(`eg-${e}-item`).closest("ul"),e,i)}}};return r("div",{class:"eg_mid_topics"},e.map(((e,t)=>r("ul",{id:`eg-topics-row#${t+1}`},e.map((e=>r("li",{id:`eg-${e}-item`},r("input",{type:"checkbox",id:`eg-${e}-topic`,onclick:()=>i(e)}),r("label",{className:"eg-topics-label",htmlFor:`eg-${e}-topic`},r("img",{src:"https://www.hindustantimes.com/static-content/1y/ht/personalisation/tick_icon.png"}),ce(e)))))))))},ue=e=>{let t,o=U&&""!=U?U:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png",n=R||"Reader",i="Name",a="Enter Your Name Card",c="Hello,",d="What should we call you?",g=E+"/"+z,m=O+"%";"namePage"==e.page?t=r(ae,null):"obMobileInp"==e.page?(a="Enter Your Mobile Number Card",i="Mobile number",c="Welcome "+A(n)+", thanks for logging in! Let's tailor your experience.",d="Please share your phone number",t=r(re,null)):"obOtp"==e.page?(a="Enter Your Mobile Number Card",c="",i="OTP",d="Enter the OTP sent to "+k,t=r(se,null)):"topics"==e.page&&(a="Select Topics Card",i="Preferences",d="Pick your favorite topics to personalize your experience",setTimeout((()=>{document.querySelector(".eg_proceed").style.display="block",document.querySelector(".eg_mid_label").style.display="none"}),0),t=r(pe,{topics:e.topics}));const h=()=>{de.length>0&&((async e=>{const t=s.get("client"),o=M("token");let n=u+"/sso/api/v1/user/"+t+"/topics";const i={"Content-Type":"application/json","X-Client":p,Authorization:o};try{let t=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(e)}),o=await t.json();return 1==o.success?(ie("topic"),B(),o.data):(console.log("Request was not successful:",o),null)}catch(a){return console.error("Error submitting subtopics:",a),null}})(de),l("onboarding_journey_interaction","Select Topics Card","Submit Clicked",de),N("Preferences","Submit preferences",de))};return r("div",{id:"eg-lightbox",class:"eg_lightbox"},r("div",{class:"eg_lightbox-content"},r("span",{class:"eg_close",onclick:()=>{N(i,"Close"),oe("onboarding_journey_close_clicked",a)}}),r("div",{class:"eg_container"},r("div",{class:"eg_top_header"},r("div",{class:"eg_top_header_left"},r("span",null,"Complete steps to discover a surprise!"),r("span",null,r("img",{src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/question.png"}))),r("div",{class:"eg_top_header_right"},g)),r("div",{id:"eg-myProgress",class:"eg_progressBar"},r("div",{id:"eg-myBar",class:"eg_myBar",style:{width:m}})),r("div",{class:"eg_mid_container"},r("div",{class:"eg_mid_profile"},r("img",{src:o,style:{width:"64px",height:"64px"}})),r("div",{class:"eg_mid_label"},c),r("div",{class:"eg_mid_question"},d),t)),r("button",{class:"eg_proceed eg_submit",style:{display:"none"},onclick:()=>h()},"Submit")))},ge=()=>(l("onboarding_journey_viewed","Enter Your Name Card"),r(ue,{page:"namePage"})),me=()=>(l("onboarding_journey_viewed","Enter Your Mobile Number"),r(ue,{page:"obMobileInp"})),he=()=>(l("onboarding_journey_viewed","Select Topics Card"),r(ue,{page:"topics"})),ye=()=>{fe||l("onboarding_journey_viewed","Login Congratulations Viewed"),ve();let e=s.get("obUserName")?s.get("obUserName"):R||"Reader";e=A(e);let t=e.length>6?e.substring(0,6)+"...":e;const o=s.get("obUserImg")?s.get("obUserImg"):U||"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/profile.png";setTimeout((()=>{document.getElementById("eg-lightbox1").style.display="flex"}),500);let n=_e.split(",");return r("div",{id:"eg-lightbox1",class:"eg-lightbox1"},r("div",{class:"eg-lightbox-content1"},r("div",{class:"eg-congrats_container"},r("div",null,r("img",{class:"eg-tickGif",src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/tick_gif.gif"})),r("h3",null,"Congratulations ",e),r("p",null,"You are all set! Here's what you've unlocked:"),r("ul",null,n.map(((e,t)=>r("li",{key:t},r("div",{class:"eg-check"},r("img",{src:"https://www.hindustantimes.com/ht-img/sso/prod/onboarding/images/tick1.png",style:{width:"16px",height:"12px"}})),e)))),r("button",{class:"eg-congrats_btn",onclick:()=>{l("onboarding_journey_interaction","Login Congratulations Viewed","Explore Now Clicked"),M("token")&&M("_ht_clientid")&&(location.href="https://www.hindustantimes.com/my-ht")}},"Explore now"),r("button",{class:"eg-continue_btn",onclick:()=>{l("onboarding_journey_interaction","Login Congratulations Viewed","Continue Reading Article Clicked"),q()}},"Continue reading article")),r("div",{class:"eg-profile_arrow"}),r("div",{class:"eg_profile_mb"},r("div",{class:"eg-profile_inner"},r("div",null,r("img",{src:o,style:{width:"32px",height:"32px",borderRadius:"100%"}})),r("div",null,t)))))};var be=[],_e="",fe=!1;const ve=()=>{fe=!0};function we(e){if("congratulations"!=e){ee(!0,!1);const t=async()=>{const{userNameData:t,userMobileData:o,isPreferenceSet:n}=await(async()=>{let e=u+"/sso/api/v1/user/fetchData";const t={"Content-Type":"application/json","X-Client":p,Authorization:M("token")};try{let o=await fetch(e,{method:"GET",headers:t}),n=await o.json();if(1==n.success&&n.data)return $=n.data.cellNumber,R=n.data.name,n.data.image&&""!=n.data.image&&(U=n.data.image),{userNameData:n.data.name,userMobileData:n.data.cellNumber,isPreferenceSet:n.data.onBoardingTopicSaved};console.log("Something went wrong while updating name : "+getStringObject(n))}catch(o){console.log(JSON.stringify(o))}})();""!=t&&"Reader"!=t&&ie("name"),null!=o&&""!=o&&ie("mobile"),n&&ie("topic"),((e,t,o,n)=>{const i=M("_ht_fp")?M("_ht_fp"):"12345",a=parseInt(i.slice(-1))&&parseInt(i.slice(-1))%2!=0;if(t?o||n?o&&!n?Y="obTopic":!o&&n&&(Y="obMobile"):a?(Y="obMobile",F="obTopic"):(Y="obTopic",F="obMobile"):(Y="namePage",o||n?o&&!n?F="obTopic":!o&&n&&(F="obMobile"):a?(F="obMobile",J="obTopic"):(F="obTopic",J="obMobile")),Y&&G.push(Y),F&&G.push(F),J&&G.push(J),z=G.length,e){const t=G.indexOf(e);t>-1&&G.splice(t,1),G.unshift(e)}else B()})(e,X,K,W)};t()}const t=r("div",null," ");return s.subscribe((async({currentPage:e})=>{if("namePage"===e&&(t.innerHTML="",t.append(r(ge,null))),"obTopic"===e){let{result:e}=await(async()=>{const e={"Content-Type":"application/json"};try{let t=await fetch("https://personalize.hindustantimes.com/popular-topic-sections-ht?propertyId=ht&platformId=web",{method:"GET",headers:e}),o=await t.json();return"success"==o.status?{result:o.items}:(console.log("Request was not successful:",o),[])}catch(t){return console.error("Error fetching preferences:",t),[]}})();be=e&&e.length>0?e:["environment","world news","sports","india news","business","real estate","technology","cricket"],t.innerHTML="",t.append(r(he,null))}if("obMobile"===e&&(t.innerHTML="",t.append(r(me,null))),"obOtp"===e&&(t.innerHTML="",t.append(r(m,null))),"congratulations"===e){let{benefits:e}=await(async()=>{let e=M("ht_cdp_echo_campaignId")?M("ht_cdp_echo_campaignId"):"onboarding_campaign_123";if("onboarding_campaign_123"==e)return{benefits:""};let t="https://cdpecho.hindustantimes.com/api/v3/user/benefit/"+e;try{let e=await fetch(t,{method:"GET"}),o=await e.json();return o&&o.benefits?{benefits:o.benefits}:(console.log("Something went wrong while getting user benefits data : "+getStringObject(o)),{benefits:""})}catch(o){return console.log(JSON.stringify(o)),{benefits:""}}})();_e=e&&""!=e?e:"Personalized Reads, Your personalised destination, Exclusive Vouchers from 100+ Brands",t.innerHTML="",t.append(r(ye,null))}})),t}setTimeout((()=>{(e=>{const t=document.createElement("script");t.src=e,document.head.appendChild(t)})("https://images.hindustantimes.com/sso/prod/bottom-sdk/bottom-slider-sdk.js")}),1e3);window.onboarding={render:function(e){const{element:t,client:o,funnel_entry:n,SDK_Callback:i,sdk_redirect_url:a,currentPage:r,campaignId:l,campaignName:c,campaignType:d,congratulatePopup:p,obUserName:u,obUserImg:g}=e;(e=>{const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)})(""),s.dispatch({rootElement:t,client:o.toUpperCase(),funnel_entry:n,SDK_Callback:i,sdk_redirect_url:a||location.href,currentPage:r,campaignId:"1730813301_1730813301667",campaignName:"Article_Bottom_Banner_Mweb_AMP",campaignType:"onboarding",congratulatePopup:p,obUserName:u,obUserImg:g}),t.innerHTML="",((e,t)=>{const o=document.createElement("link");o.href=e,o.rel="stylesheet",document.head.appendChild(o),o.onload=()=>{t&&t()},o.onerror=()=>{console.error(`Failed to load stylesheet: ${e}`)}})("https://www.hindustantimes.com/ht-img/sso/prod/onboarding/css/Onboard.css",(()=>{t.append(we(e.currentPage))}))}}}));
